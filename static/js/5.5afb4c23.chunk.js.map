{"version":3,"sources":["hoc/withAuthRedirect.js","img/userpic.svg","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/Users/Users.module.css","components/commons/Paginator/Paginator.module.css","components/Users/User.module.css","components/commons/Paginator/Paginator.js","components/Users/User.jsx","components/Users/Users.jsx","redux/users-selectors.js","components/Users/UsersContainer.jsx"],"names":["mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","module","exports","_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","unsupportedIterableToArray","TypeError","Paginator","totalItemsCount","pageSize","currentPage","onPageChanged","portionSize","pagesCount","Math","ceil","pages","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","className","classes","pagination","onClick","paginationButton","prev","filter","page","map","index","pageNumber","pageNumberSelected","event","key","User","user","followingInProgress","unfollow","follow","followingItems","id","navUserpic","src","photos","large","AvatarPlug","alt","userpic","infoItems","infoItem","mainText","name","plainText","status","followed","disabled","some","followButton","Users","users","friendsPage","findElems","title","type","findInput","placeholder","findButton","getUsers","usersPage","getPageSize","getTotalItemsCount","getCurrentPage","getIsFetching","isFetching","getFollowingInProgress","UsersContainer","setCurrentPage","requestUsers","preloaderContainer","Preloader","compose","toggleFollowingProgress"],"mappings":"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","file":"static/js/5.5afb4c23.chunk.js","sourcesContent":["/*\nЭто пример ХОК - high order component. Он работает так:\n- принимает в себя компонент в качестве аргумента\n- проверяет авторизацию и перенаправляет на страницу авторизации,\nили открывает страницу, если с авторизацией все ок\n*/\n\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nconst mapStateToPropsForRedirect = (state) => ({\n  isAuth: state.auth.isAuth,\n});\n\nexport const withAuthRedirect = (Component) => {\n  class RedirectComponent extends React.Component {\n    render() {\n      if (!this.props.isAuth) return <Redirect to='./login' />;\n      return <Component {...this.props} />;\n    }\n  }\n\n  const ConnectedAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent);\n\n  return ConnectedAuthRedirectComponent;\n};\n","module.exports = __webpack_public_path__ + \"static/media/userpic.e9fbda13.svg\";","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"findElems\":\"Users_findElems__SY7Jy\",\"title\":\"Users_title__2S65O\",\"findInput\":\"Users_findInput__3xGxo\",\"findButton\":\"Users_findButton__Sdp77\",\"friendsPage\":\"Users_friendsPage__3hvZu\",\"preloaderContainer\":\"Users_preloaderContainer__L2PXX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"Paginator_pagination__3fj_E\",\"paginationButton\":\"Paginator_paginationButton__1cAwd\",\"prev\":\"Paginator_prev__2TmXD\",\"next\":\"Paginator_next__2TNRZ\",\"pageNumber\":\"Paginator_pageNumber__2hBAu\",\"pageNumberSelected\":\"Paginator_pageNumberSelected__rtDjU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"followingItems\":\"User_followingItems__2rvrx\",\"navUserpic\":\"User_navUserpic__251Vw\",\"userpic\":\"User_userpic__h6Gm6\",\"followButton\":\"User_followButton__O8m87\",\"unfollow\":\"User_unfollow__3jo4s\",\"follow\":\"User_follow__21fFT\",\"infoItems\":\"User_infoItems__6iGwR\",\"infoItem\":\"User_infoItem__2aNht\",\"mainText\":\"User_mainText__i6oRi\",\"plainText\":\"User_plainText__1GS3s\"};","import classes from './Paginator.module.css';\n\nimport React, {useState} from 'react';\n\nconst Paginator = ({totalItemsCount, pageSize, currentPage, onPageChanged, portionSize = 10}) => {\n  const pagesCount = Math.ceil(totalItemsCount / pageSize);\n\n  const pages = [];\n  for (let i = 1; i <= pagesCount; i++) {\n    pages.push(i);\n  }\n\n  const portionCount = Math.ceil(pagesCount / portionSize);\n  const [portionNumber, setPortionNumber] = useState(1);\n  const leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\n  const rightPortionPageNumber = portionNumber * portionSize;\n\n\n  return (\n    <div className={classes.pagination}>\n      {portionNumber > 1 && (\n        <button\n          onClick={() => {\n            setPortionNumber(portionNumber - 1);\n          }}\n          className={`${classes.paginationButton} ${classes.prev}`}></button>\n      )}\n\n      {pages\n        .filter(\n          (page) =>\n            page >= leftPortionPageNumber && page <= rightPortionPageNumber\n        )\n        .map((page, index) => {\n          return (\n            <span\n              className={\n                currentPage === page\n                  ? `${classes.pageNumber} ${classes.pageNumberSelected}`\n                  : `${classes.pageNumber}`\n              }\n              onClick={(event) => {\n                onPageChanged(page);\n              }}\n              key={index}>\n              {page}\n            </span>\n          );\n        })}\n      {portionCount > portionNumber && (\n        <button\n          onClick={() => {\n            setPortionNumber(portionNumber + 1);\n          }} className={`${classes.paginationButton} ${classes.next}`}>\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default Paginator;\n","import classes from './User.module.css';\n\nimport React from 'react';\n\nimport AvatarPlug from './../../img/userpic.svg';\nimport { NavLink } from 'react-router-dom';\n\nconst User = ({\n  user,\n  followingInProgress,\n  unfollow,\n  follow\n}) => {\n  return (\n    <div className={classes.followingItems}>\n      <NavLink to={'/profile/' + user.id} className={classes.navUserpic}>\n        <img\n          src={user.photos.large != null ? user.photos.large : AvatarPlug}\n          alt='UserPic'\n          className={classes.userpic}\n        />\n      </NavLink>\n      <div className={classes.infoItems}>\n        <div className={classes.infoItem}>\n          <p className={classes.mainText}>{user.name}</p>\n          <p className={classes.plainText}>{user.status === null ? 'Статус не указан' : user.status}</p>\n        </div>\n        <div>\n          <p className={classes.mainText}>\n            Здесь задумывалось показать страну\n          </p>\n          <div>\n            {user.followed ? (\n              <button\n                disabled={followingInProgress.some((id) => id === user.id)}\n                onClick={() => {\n                  unfollow(user.id);\n                }}\n                className={`${classes.followButton} ${classes.unfollow}`}>\n                Отписаться\n              </button>\n            ) : (\n              <button\n                disabled={followingInProgress.some((id) => id === user.id)}\n                onClick={() => {\n                  follow(user.id);\n                }}\n                className={`${classes.followButton} ${classes.follow}`}>\n                Подписаться\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default User;\n","import classes from './Users.module.css';\n\nimport React from 'react';\nimport Paginator from '../commons/Paginator/Paginator';\nimport User from './User';\n\nconst Users = ({\n  currentPage,\n  totalItemsCount,\n  pageSize,\n  onPageChanged,\n  users,\n  ...props\n}) => {\n  return (\n    <div className={classes.friendsPage}>\n      <div className={classes.findElems}>\n        <h1 className={classes.title}>Найти друзей</h1>\n        <input\n          type='text'\n          className={classes.findInput}\n          placeholder='Введите имя'\n        />\n        <button className={classes.findButton}>Найти</button>\n      </div>\n\n      <Paginator\n        currentPage={currentPage}\n        onPageChanged={onPageChanged}\n        totalItemsCount={totalItemsCount}\n        pageSize={pageSize}\n      />\n\n      {users.map((user) => (\n        <User\n          user={user}\n          followingInProgress={props.followingInProgress}\n          unfollow={props.unfollow}\n          follow={props.follow}\n          key={user.id}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default Users;\n","export const getUsers = (state) => {\n  return state.usersPage.users\n}\n\nexport const getPageSize = (state) => {\n  return state.usersPage.pageSize\n}\n\nexport const getTotalItemsCount = (state) => {\n  return state.usersPage.totalItemsCount\n}\n\nexport const getCurrentPage = (state) => {\n  return state.usersPage.currentPage\n}\n\nexport const getIsFetching = (state) => {\n  return state.usersPage.isFetching\n}\n\nexport const getFollowingInProgress = (state) => {\n  return state.usersPage.followingInProgress\n}","import React from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\n\nimport {\n  follow,\n  unfollow,\n  toggleFollowingProgress,\n  setCurrentPage,\n  requestUsers\n} from '../../redux/users-reducer';\nimport Users from './Users';\nimport Preloader from '../commons/Preloader/Preloader';\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect';\nimport {\n  getUsers,\n  getPageSize,\n  getTotalItemsCount,\n  getCurrentPage,\n  getIsFetching,\n  getFollowingInProgress,\n} from '../../redux/users-selectors';\nimport classes from './Users.module.css';\n\nclass UsersContainer extends React.Component {\n  componentDidMount() {\n    const {currentPage, pageSize} = this.props;\n    this.props.requestUsers(currentPage, pageSize);\n  } // Обработали данные через thunk\n\n  onPageChanged = (pageNumber) => {\n    const {pageSize} = this.props\n    this.props.setCurrentPage(pageNumber);\n    this.props.requestUsers(pageNumber, pageSize);\n  }; // Обработали данные через thunk\n\n  render() {\n    return (\n      <>\n        <div className={classes.preloaderContainer}>\n          {this.props.isFetching ? <Preloader /> : null}\n        </div>\n        <Users\n          totalItemsCount={this.props.totalItemsCount}\n          pageSize={this.props.pageSize}\n          currentPage={this.props.currentPage}\n          onPageChanged={this.onPageChanged}\n          users={this.props.users}\n          follow={this.props.follow}\n          unfollow={this.props.unfollow}\n          followingInProgress={this.props.followingInProgress}\n        />\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    users: getUsers(state),\n    pageSize: getPageSize(state),\n    totalItemsCount: getTotalItemsCount(state),\n    currentPage: getCurrentPage(state),\n    isFetching: getIsFetching(state),\n    followingInProgress: getFollowingInProgress(state),\n  };\n};\n\n\nexport default compose(\n  withAuthRedirect,\n  connect(mapStateToProps, { follow, unfollow, setCurrentPage, toggleFollowingProgress, requestUsers })\n)(UsersContainer)"],"sourceRoot":""}